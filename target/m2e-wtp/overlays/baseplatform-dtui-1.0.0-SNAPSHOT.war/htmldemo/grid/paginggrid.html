<!DOCTYPE html>
<html>
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>My First Grid</title> 

<style> 
html, body { 
    margin: 0; 
    padding: 0; 
    font-size: 75%; 
} 
</style> 

	<link rel="stylesheet" href="../../dtui/theme/dtui.css" type="text/css"/>
	<script src="../../dtui/js/jquery/jquery.js"></script>
	<script src="../../dtui/js/jqueryui/jquery-ui.min.js"></script>
	<script src="../../dtui/js/jqgrid/grid.locale-cn.js" type="text/javascript"></script>
    <script src="../../dtui/js/jqgrid/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="../../dtui/js/dtui.grid.js" type="text/javascript"></script>
	<link rel="stylesheet" href="../../htmldemo/demos.css" />
	
<script type="text/javascript">
var dataStr = '{"pagingInfo.pageNum":"1","pagingInfo.totalPages":2,"pagingInfo.totalRows":"13","resultList":[{"id":"13","invdate":"2007-10-06","name":"Client 3","amount":"1000.00","tax":"0.00","total":"1000.00","note":null},{"id":"12","invdate":"2007-10-06","name":"Client 2","amount":"700.00","tax":"140.00","total":"840.00","note":null},{"id":"11","invdate":"2007-10-06","name":"Client 1","amount":"600.00","tax":"120.00","total":"720.00","note":null},{"id":"10","invdate":"2007-10-06","name":"Client 2","amount":"100.00","tax":"20.00","total":"120.00","note":null},{"id":"9","invdate":"2007-10-06","name":"Client 1","amount":"200.00","tax":"40.00","total":"240.00","note":null},{"id":"8","invdate":"2007-10-06","name":"Client 3","amount":"200.00","tax":"0.00","total":"200.00","note":null},{"id":"7","invdate":"2007-10-05","name":"Client 2","amount":"120.00","tax":"12.00","total":"134.00","note":null},{"id":"6","invdate":"2007-10-05","name":"Client 1","amount":"50.00","tax":"10.00","total":"60.00","note":""},{"id":"5","invdate":"2007-10-05","name":"Client 3","amount":"100.00","tax":"0.00","total":"100.00","note":"no tax at all"},{"id":"4","invdate":"2007-10-04","name":"Client 3","amount":"150.00","tax":"0.00","total":"150.00","note":"no tax"}]}';
/*
var grid_data ={
	    "pagingInfo.pageNum": "1",
	    "pagingInfo.totalPages": 2,
	    "pagingInfo.totalRows": "13",
	    "resultList": [
	        {
	            "id": "13",
	            "invdate": "2007-10-06",
	            "name": "Client 3",
	            "amount": "1000.00",
	            "tax": "0.00",
	            "total": "1000.00",
	            "note": null
	        },
	        {
	            "id": "12",
	            "invdate": "2007-10-06",
	            "name": "Client 2",
	            "amount": "700.00",
	            "tax": "140.00",
	            "total": "840.00",
	            "note": null
	        },
	        {
	            "id": "11",
	            "invdate": "2007-10-06",
	            "name": "Client 1",
	            "amount": "600.00",
	            "tax": "120.00",
	            "total": "720.00",
	            "note": null
	        },
	        {
	            "id": "10",
	            "invdate": "2007-10-06",
	            "name": "Client 2",
	            "amount": "100.00",
	            "tax": "20.00",
	            "total": "120.00",
	            "note": null
	        },
	        {
	            "id": "9",
	            "invdate": "2007-10-06",
	            "name": "Client 1",
	            "amount": "200.00",
	            "tax": "40.00",
	            "total": "240.00",
	            "note": null
	        },
	        {
	            "id": "8",
	            "invdate": "2007-10-06",
	            "name": "Client 3",
	            "amount": "200.00",
	            "tax": "0.00",
	            "total": "200.00",
	            "note": null
	        },
	        {
	            "id": "7",
	            "invdate": "2007-10-05",
	            "name": "Client 2",
	            "amount": "120.00",
	            "tax": "12.00",
	            "total": "134.00",
	            "note": null
	        },
	        {
	            "id": "6",
	            "invdate": "2007-10-05",
	            "name": "Client 1",
	            "amount": "50.00",
	            "tax": "10.00",
	            "total": "60.00",
	            "note": ""
	        },
	        {
	            "id": "5",
	            "invdate": "2007-10-05",
	            "name": "Client 3",
	            "amount": "100.00",
	            "tax": "0.00",
	            "total": "100.00",
	            "note": "no tax at all"
	        },
	        {
	            "id": "4",
	            "invdate": "2007-10-04",
	            "name": "Client 3",
	            "amount": "150.00",
	            "tax": "0.00",
	            "total": "150.00",
	            "note": "no tax"
	        }
	    ]
	}; 
*/
	$(document).ready(function(){
	  /* jQuery("#list").jqGrid({ */
	  $("#list").dtpaginggrid({
	    datatype:'jsonstring',
		datastr : dataStr, 
	    colNames:['InvID','Date', 'Amount','Tax','Total','Notes'], 
	    
	    colModel :[ 
	      {name:'invid', index:'invid', jsonmap:'id', width:55, sorttype:'int',editable:true, key:true}, 
	      {name:'invdate', index:'invdate', width:90, sorttype:'date', datefmt:'Y-m-d',editable:true}, 
	      {name:'amount', index:'amount', width:80, align:'right', sorttype:'float',editable:true}, 
	      {name:'tax', index:'tax', width:80, align:'right', sorttype:'float',editable:true}, 
	      {name:'total', index:'total', width:80, align:'right', sorttype:'float',editable:true}, 
	      {name:'note', index:'note', width:150, sortable:false,editable:true} ], 
	    
	    multiselect: true,
	    rowList:[10,20,30],
	    rowNum:10, 
	    showPager: true,
	    viewrecords: true, 
	    sortname:'invid',
	    sortorder:"desc",
	    //table 名字
	    caption: 'My first grid' 
	  }).navGrid('#list_pager',{edit:false,add:false}); 
	  
	  
	  /* getSelection */
	  $("#a1").click(function(){
		  var selectedData=$("#list").dtgrid('getSelection');
		  alert('InvNo:'+selectedData.invid+'\n'
			   +'Date:'+selectedData.invdate+'\n'
			   +'amount:'+selectedData.amount+'\n'
			   +'tax:'+selectedData.tax+'\n'
			   +'total:'+selectedData.total+'\n'
			   +'note:'+selectedData.note
		  ); 
	  });
	  /*update selected*/
	  $("#a2").click(function(){
		  var selectedData=$("#list").dtgrid('getSelection');
		  $("#list").dtgrid('updateRowData',selectedData.invid,{invdate:"2013-4-11",amount:"10000",tax:"80",total:"10080",note:"已处理"});
	  });
	  /*setSelection*/
	  $("#a3").click(function(){
		 $("#list").dtgrid('setSelection',1,true);
	  });
	  /*edit data */
	   $("#a4").click(function(){
		 $("#list").dtgrid('editRow',1);
	  });
	  /*save data */
	   $("#a5").click(function(){
		  $("#list").dtgrid('saveRow',1);
	  });
	  /*restore data*/
	   $("#a6").click(function(){
		 $("#list").dtgrid('restoreRow',1);
	  });
	  /*export data  */
	   $("#a7").click(function(){
			 $("#list").dtgrid('exportData', {exptype:'xmlstring',root:'invoices',ident: "\t",url:'Exportxml.txt'});
	    });
	}); 
	</script> 
	</head> 
	<body> 
		<table id="list"></table> 
		
		<a href="#" id="a1">1.获取选择行的值</a>
		<br></br>
		<a href="#" id="a2">2.修改选择行的值</a><br></br>
		<a href="#" id="a3">3.测试setSelection</a><br></br>
		<a href="#" id="a4">4.edit row data</a><br></br>
		<a href="#" id="a5">5.save row data</a><br></br>
		<a href="#" id="a6">6.cancel row data</a><br></br>
		<a href="#" id="a7">7.export data</a>
	</body> 
	
	<div class="demo-description">
		<h3>本实例功能</h3>
		<ul>
			<li>实现表格的分页功能.</li>
		</ul>
	</div>
</html> 